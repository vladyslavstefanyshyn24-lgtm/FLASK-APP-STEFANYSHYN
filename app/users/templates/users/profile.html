{% extends 'base.html' %}

{% block head %}
    {{ super() }} <style>
        
        body, .card {
            transition: background-color 0.3s, color 0.3s;
        }

       
        html.light body {
            background-color: #f8f9fa;
            color: #212529;
        }
        html.light .card { background-color: #ffffff; }
        html.light .table { color: #212529; }

        
        html.dark body {
            background-color: #212529;
            color: #f8f9fa;
        }
        html.dark .card { background-color: #343a40; }
        html.dark .table { color: #f8f9fa; }
        html.dark .table-striped>tbody>tr:nth-of-type(odd)>* { color: #f8f9fa; }
    </style>
{% endblock %}


{% block content %}
<h1 class="mb-4">–ü—Ä–∏–≤—ñ—Ç, {{ username }}!</h1>

<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–º–∏</h5>
        <p>–û–±–µ—Ä—ñ—Ç—å –∫–æ–ª—å–æ—Ä–æ–≤—É —Å—Ö–µ–º—É:</p>
        <a href="{{ url_for('users.set_theme', theme='light') }}" class="btn btn-outline-secondary">–°–≤—ñ—Ç–ª–∞ ‚òÄÔ∏è</a>
        <a href="{{ url_for('users.set_theme', theme='dark') }}" class="btn btn-outline-dark">–¢–µ–º–Ω–∞ üåô</a>
    </div>
</div>

<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">–î–æ–¥–∞—Ç–∏ –ö—É–∫—ñ</h5>
        <form action="{{ url_for('users.add_cookie') }}" method="POST" class="row g-3">
            <div class="col-md-4">
                <label for="key" class="form-label">–ö–ª—é—á</label>
                <input type="text" class="form-control" id="key" name="key" required>
            </div>
            <div class="col-md-4">
                <label for="value" class="form-label">–ó–Ω–∞—á–µ–Ω–Ω—è</label>
                <input type="text" class="form-control" id="value" name="value" required>
            </div>
            <div class="col-md-3">
                <label for="expiry_days" class="form-label">–¢–µ—Ä–º—ñ–Ω (–¥–Ω—ñ–≤)</label>
                <input type="number" class="form-control" id="expiry_days" name="expiry_days" min="0" placeholder="–ü–æ—Ä–æ–∂–Ω—å–æ = —Å–µ—Å—ñ—è">
            </div>
            <div class="col-md-1 d-flex align-items-end">
                <button type="submit" class="btn btn-primary w-100" title="–î–æ–¥–∞—Ç–∏ –∫—É–∫—ñ">+</button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title mb-0">–ü–æ—Ç–æ—á–Ω—ñ –ö—É–∫—ñ</h5>
            <form action="{{ url_for('users.delete_cookie') }}" method="POST">
                <button type="submit" class="btn btn-danger btn-sm">–í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –∫—É–∫—ñ</button>
            </form>
        </div>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th style="width: 25%;">–ö–ª—é—á</th>
                    <th>–ó–Ω–∞—á–µ–Ω–Ω—è</th>
                    <th style="width: 15%;">–î—ñ—è</th>
                </tr>
            </thead>
            <tbody>
                {% for key, value in cookies.items() %}
                <tr>
                    <td>{{ key }}</td>
                    <td style="word-break: break-all;">{{ value }}</td>
                    <td>
                        {% if key not in ['session', 'theme'] %}
                        <form action="{{ url_for('users.delete_cookie') }}" method="POST" class="d-inline">
                            <input type="hidden" name="key" value="{{ key }}">
                            <button type="submit" class="btn btn-outline-danger btn-sm">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                        </form>
                        {% else %}
                        <span class="text-muted">(—Å–∏—Å—Ç–µ–º–Ω–∏–π)</span>
                        {% endif %}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3" class="text-center">–ö—É–∫—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}